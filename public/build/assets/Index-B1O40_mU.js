import{c as L,u as q,a as S,r as g,b as B,w as I,d as b,o as h,e as t,f as V,g as D,h as R,i as x,j as d,v as f,k as o,F as A,l as $,t as p,m as H,n as z,p as C,q as J}from"./app-D6CDPDBM.js";import{_ as y}from"./ErrorMessage-coxDHinP.js";/* empty css            *//**
 * @license lucide-vue-next v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=L("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),O={class:"bg- shadow-md mt-16 rounded-lg border border-gray-200 max-w-5xl mx-auto"},Q={class:"flex flex-col sm:flex-row gap-4"},W={class:"flex-1"},X={class:"flex flex-col sm:flex-row gap-4"},Y={class:"flex-1"},Z={class:"flex-1"},tt={class:"flex flex-col sm:flex-row gap-4"},et={class:"flex-1"},st={class:"flex-1"},lt={class:"flex justify-between gap-3"},ot={class:"overflow-x-auto rounded-lg border border-gray-300 mt-5"},rt={class:"w-full text-sm text-left text-gray-700"},at={class:"px-4 py-2 whitespace-nowrap"},nt={class:"px-4 py-2 whitespace-nowrap"},it={class:"px-4 py-2 whitespace-nowrap"},dt={class:"px-4 py-2 whitespace-nowrap"},pt={class:"px-4 py-2 whitespace-nowrap"},ut={class:"px-4 py-2 whitespace-nowrap"},ct={class:"px-4 py-2 whitespace-nowrap text-red-500 cursor-pointer"},mt={class:"text-center text-[20px] font-bold my-3"},gt={class:"mt-4 w-full"},bt={__name:"Index",setup(xt){const k=q();S(()=>k.props.films);const w=S(()=>k.props.items),_=g(null),a=g(0),u=g(0),c=g(0),m=g(0),s=B({length:"",film_name:"",price:"",gst:9,sgst:9,film_calculations:{totalPrice:null,gstAmount:null,sgstAmount:null,grandTotal:null,film_name:null,length:null,price:null}});function G(){const r=parseFloat(s.length)||0,e=parseFloat(s.price)||0,l=parseFloat(s.gst)||0,n=parseFloat(s.sgst)||0;a.value=r*e,u.value=a.value*l/100,c.value=a.value*n/100,m.value=a.value+u.value+c.value}function P(r){confirm("Are you sure you want to remove this item?")&&C.delete("/admin/calculator/remove-item",{data:{index:r},preserveScroll:!0})}function E(){C.delete("/admin/calculator/delete",{preserveScroll:!0})}function U(){G(),s.film_calculations.totalPrice=a.value.toFixed(2),s.film_calculations.gstAmount=u.value.toFixed(2),s.film_calculations.sgstAmount=c.value.toFixed(2),s.film_calculations.grandTotal=m.value.toFixed(2),s.film_calculations.film_name=s.film_name,s.film_calculations.price=s.price,s.film_calculations.length=s.length,s.post("/admin/calculator",{onSuccess:()=>{J(()=>{_.value&&_.value.scrollIntoView({behavior:"smooth"})})}})}return I(()=>[s.length,s.price,s.gst,s.sgst],()=>{const r=parseFloat(s.length)||0,e=parseFloat(s.price)||0,l=parseFloat(s.gst)||0,n=parseFloat(s.sgst)||0;a.value=r*e,u.value=a.value*l/100,c.value=a.value*n/100,m.value=a.value+u.value+c.value},{immediate:!0}),I(w,r=>{let e=0,l=0,n=0;r.forEach(i=>{const v=parseFloat(i.totalPrice)||0,j=parseFloat(i.gst)||0,M=parseFloat(i.sgst)||0,F=v*j/100,T=v*M/100,N=v+F+T;i.gst_amount=F.toFixed(2),i.sgst_amount=T.toFixed(2),i.grand_total=N.toFixed(2),e+=v,l+=F,n+=T}),m.value=e+l+n},{deep:!0,immediate:!0}),(r,e)=>(h(),b(A,null,[e[17]||(e[17]=t("div",{class:"flex font-sans mb-5"},[t("h3",null,"Dashboard"),V(" /calculator ")],-1)),t("div",O,[t("form",{onSubmit:D(U,["prevent"]),class:"mx-auto p-6 space-y-6"},[e[15]||(e[15]=t("div",{class:"flex justify-between items-center"},[t("h1",{class:"text-2xl font-bold text-gray-900"}," Invoice Calculator ")],-1)),e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900"}," Add Invoice Item ",-1)),t("div",Q,[t("label",W,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-800 pb-1"}," Film Name ",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o(s).film_name=l),placeholder:"Enter film name",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900"},null,512),[[f,o(s).film_name]]),d(y,{error:o(s).errors.film_name},null,8,["error"])])]),t("div",X,[t("label",Y,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-800 pb-1"}," Length (in sqft) ",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).length=l),placeholder:"Enter length",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900"},null,512),[[f,o(s).length]]),d(y,{error:o(s).errors.length},null,8,["error"])]),t("label",Z,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-800 pb-1"}," Unit Price ",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).price=l),placeholder:"Enter unit price",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900"},null,512),[[f,o(s).price]]),d(y,{error:o(s).errors.price},null,8,["error"])])]),t("div",tt,[t("label",et,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-800 pb-1"}," CGST (%) ",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).gst=l),placeholder:"Enter gst %",inputmode:"numeric",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900"},null,512),[[f,o(s).gst]]),d(y,{error:o(s).errors.gst},null,8,["error"])]),t("label",st,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-800 pb-1"}," SGST (%) ",-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).sgst=l),placeholder:"Enter SGST %",class:"w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900"},null,512),[[f,o(s).sgst]]),d(y,{error:o(s).errors.sgst},null,8,["error"])])]),t("div",lt,[t("button",{type:"button",onClick:e[5]||(e[5]=(...l)=>r.resetForm&&r.resetForm(...l)),class:"px-4 py-2 rounded-lg bg-gray-100 text-gray-800 border border-red-500 font-semibold hover:bg-gray-200"}," Reset Form "),e[11]||(e[11]=t("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-red-500 text-white font-semibold hover:bg-red-700"}," Add Item ",-1))]),w.value.length?(h(),b("div",{key:0,ref_key:"invoiceSection",ref:_},[t("div",{class:"flex justify-between items-center gap-5"},[e[12]||(e[12]=t("h3",{class:"text-xl font-bold text-gray-900"}," Invoice Items ",-1)),t("div",null,[t("h3",{type:"button",onClick:E,class:"cursor-pointer text-sm bg-red-500 px-2 py-2 text-white rounded-lg"}," Clear Invoices ")])]),t("div",ot,[t("table",rt,[e[13]||(e[13]=t("thead",{class:"bg-gray-100 text-gray-900"},[t("tr",null,[t("th",{class:"px-4 py-2 whitespace-nowrap"}," Item "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," Length (in sqft) "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," Price "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," CGST "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," SGST "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," Sub Total "),t("th",{class:"px-4 py-2 whitespace-nowrap"}," Remove Item ")])],-1)),t("tbody",null,[(h(!0),b(A,null,$(w.value,(l,n)=>(h(),b("tr",{key:n,class:"border-t border-gray-200 text-black text-lg"},[t("td",at,p(l.film_name),1),t("td",nt," ₹ "+p(l.length),1),t("td",it," ₹ "+p(l.price),1),t("td",dt,p(l.gst)+"% ",1),t("td",pt,p(l.sgst)+"% ",1),t("td",ut," ₹ "+p(l.totalPrice),1),t("td",ct,[d(o(K),{onClick:i=>P(n)},null,8,["onClick"])])]))),128))])])]),t("p",mt," Grand Total: ₹ "+p(m.value.toFixed(2)),1),t("div",gt,[d(o(z),{href:"/admin/calculator/show",class:"px-3 py-2 cursor-pointer rounded-lg text-white border border-red-500 font-semibold bg-red-500"},{default:H(()=>e[14]||(e[14]=[V(" Generate Invoice ")])),_:1,__:[14]})])],512)):R("",!0)],32)])],64))}};export{bt as default};
